<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.4"/>
<title>iCub-IAITableTop: IAITableTopController</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">iCub-IAITableTop
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.4 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">IAITableTopController</div>  </div>
</div><!--header-->
<div class="contents">

<p>The IAITableTopController is a module which controls the position of the IAI TableTop robot.  
<a href="#details">More...</a></p>
<p>The IAITableTopController is a module which controls the position of the IAI TableTop robot. </p>
<p>This module also cyclically polls the robot position and axis status and this information is output on two yarp ports.</p>
<h1><a class="anchor" id="intro_sec"></a>
Description</h1>
<p>The IAI TableTop robot (<a href="http://www.intelligentactuator.com/tt-table-top-robot/">http://www.intelligentactuator.com/tt-table-top-robot/</a>) is a 3-axis robot which is controlled by sending position commands via a USB serial port. The IAITableTopController takes a configuration file containing a detailed description of the experiment to be run. The experiment is represented as a set of position steps to be maintained for a given time <b>t</b>.</p>
<p>The positions are represented using absolute (X, Y, Z) coordinates with reference to the robot frame. From these coordinates the module builds the commands to be sent to the robot. The robot uses a control loop to check if the movement is completed before any new movement command can be sent.</p>
<h1><a class="anchor" id="lib_sec"></a>
Libraries and Dependencies</h1>
<p>This module depends on various YARP libraries.</p>
<p>This module also relies on the serial and serialport yarpdev modules to be enabled when compiling yarp. This is done by setting: </p>
<pre class="fragment"> ENABLE_yarpmod_serial           ON
 ENABLE_yarpmod_serialport       ON
</pre><p>when building YARP from sources.</p>
<h1><a class="anchor" id="parameters_sec"></a>
Parameters</h1>
<p><b>Command-line Parameters</b></p>
<ul>
<li>&ndash; from : Module ini configuration file.</li>
</ul>
<p><b>Configuration File Parameters</b></p>
<ul>
<li>name : The module name.</li>
<li>period : The module period in seconds.</li>
<li>serialPortConfFile : The serial port configuration filename.</li>
<li>experimentConfFile : The experiment configuration filename.</li>
</ul>
<h1><a class="anchor" id="outputports_sec"></a>
Output Ports</h1>
<ul>
<li>/IAITableTopController/posreader/position:o [yarp::sig::Vector] [default carrier:tcp]: This port outputs the (X, Y, Z) coordinates of the robot position.</li>
<li>/IAITableTopController/posreader/status:o [yarp::sig::Vector] [default carrier:tcp]: This port outputs the (X, Y ,Z) axis status flags.</li>
<li>/IAITableTopController/controller/experiment/status:o [yarp::sig::Vector] [default carrier:tcp]: This port outputs the status (step n., time start, time end) of each experiment step. This data is useful when performing data analysis on the recorded signals later on.</li>
</ul>
<h1><a class="anchor" id="conf_file_sec"></a>
Configuration Files</h1>
<ul>
<li>serialPortConfFile : The serial port configuration file.</li>
<li>experimentConfFile : The experiment configuration file.</li>
</ul>
<p><b>Serial Port Configuration File</b><br/>
 The skeleton of this file was taken from the YARP serialport module here: <a href="https://github.com/robotology/yarp/blob/master/src/modules/serial/serial.ini">https://github.com/robotology/yarp/blob/master/src/modules/serial/serial.ini</a> The parameters depend on the serial device connected to the host machine and must be configured accordingly. Below is an extract from the configuration file specific to the IAI Tabletop robot: </p>
<pre class="fragment">verbose 0
# The port name
comport /dev/ttyUSB0
#comport COM3
# The baud rate
baudrate 115200
# The parity mode (EVEN, ODD, NONE)
paritymode NONE
# The number of data bits
databits 8
# The number of stop bits
stopbits 1
...
</pre><p><b>Serial Port Name - comport</b><br/>
 In particular, the <em>comport</em> parameter must be changed to reflect the name of the serial port mounted on the host machine. A typical Linux serial port configuration will look like this: </p>
<pre class="fragment"># The port name - Linux
comport /dev/ttyUSB0
</pre><p>Whereas a typical Windows serial port configuration will look like this: </p>
<pre class="fragment"># The port name - Windows
comport COM3
</pre><p><b>Experiment Configuration File</b><br/>
 The module expects a configuration file for the experiment to be run using the robot. This file is structured as follows: </p>
<pre class="fragment">[experiment]
# Number of columns in the posVelAccDecTime array below:
nCols 13

# Position values are in um (10^-3)mm
# Velocities are in mm/s
# Accelerations/Decelerations are in 10^-2G
#   (X Y Z velX velY velZ accX accY accZ decX decY decZ t) = 13
posVelAccDecTime (
     coordinate_X ...Y ...Z velocity_X ...Y ...Z acceleration_X ...Y ...Z deceleration_X ...Y ...Z step_time \
     coordinate_X ...Y ...Z velocity_X ...Y ...Z acceleration_X ...Y ...Z deceleration_X ...Y ...Z step_time \
     ...
)
</pre><h1><a class="anchor" id="tested_os_sec"></a>
Tested OS</h1>
<p>Linux, Windows</p>
<h1><a class="anchor" id="example_sec"></a>
Example Instantiation of the Module</h1>
<p>IAITableTopController &ndash;from confIAITableTopController.ini</p>
<dl class="section author"><dt>Author</dt><dd>Francesco Giovannini (<a href="#" onclick="location.href='mai'+'lto:'+'fra'+'nc'+'esc'+'o.'+'gio'+'va'+'nni'+'ni'+'@ii'+'t.'+'it'; return false;">franc<span style="display: none;">.nosp@m.</span>esco<span style="display: none;">.nosp@m.</span>.giov<span style="display: none;">.nosp@m.</span>anni<span style="display: none;">.nosp@m.</span>ni@ii<span style="display: none;">.nosp@m.</span>t.it</a>)</dd></dl>
<p>Copyright (C) 2014 Francesco Giovannini, iCub Facility - Istituto Italiano di Tecnologia</p>
<p>CopyPolicy: Released under the terms of the GNU GPL v2.0.</p>
<p>This file can be edited at <a class="el" href="IAITableTopControllerModule_8h_source.html">src/modules/IAITableTopController/include/IAITableTopControllerModule.h</a> </p>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Jul 18 2014 15:03:55 for iCub-IAITableTop by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.4
</small></address>
</body>
</html>
